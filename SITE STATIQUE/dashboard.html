<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quokka - Dashboard</title>
  <link rel="stylesheet" href="./assets/styles.css" />
</head>
<body data-page="dashboard">
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="./index.html">
        <span class="brand-badge">Q</span>
        <span>Quokka</span>
      </a>
      <nav class="main-nav">
        <a class="nav-link" href="./index.html">Accueil</a>
        <a class="nav-link" href="./servers.html">Serveurs</a>
        <a class="nav-link" href="./add-server.html">Ajouter</a>
        <a class="nav-link" href="./offers.html">Offres</a>
        <a class="nav-link" href="./subscriptions.html">Abonnements</a>
        <a class="nav-link active" href="./dashboard.html">Dashboard</a>
      </nav>
      <div class="header-actions" data-auth="guest">
        <a class="btn btn-ghost" href="./login.html">Connexion</a>
        <a class="btn" href="./register.html">Inscription</a>
      </div>
      <div class="header-actions" data-auth="user">
        <span class="header-user">
          <span class="avatar" data-user-avatar>Q</span>
          <span data-user-pseudo>Compte</span>
        </span>
        <button class="btn btn-ghost" data-action="logout">Déconnexion</button>
      </div>
    </div>
  </header>

  <main class="page container">
    <section class="card">
      <h1>Dashboard utilisateur</h1>
      <p class="muted">Gérez votre profil, vos serveurs et vos abonnements en un seul endroit.</p>
    </section>

    <div class="tabs">
      <button class="tab-btn active" data-tab="profile">Profil</button>
      <button class="tab-btn" data-tab="servers">Serveurs</button>
      <button class="tab-btn" data-tab="subscriptions">Abonnements</button>
      <button class="tab-btn" data-tab="settings">Paramètres</button>
    </div>

    <div data-status></div>

    <section data-section="profile">
      <div class="split">
        <form class="card form" data-profile-form>
          <label>
            Pseudo
            <input type="text" name="pseudo" required />
          </label>
          <label>
            Bio
            <textarea name="bio" rows="4"></textarea>
          </label>
          <label>
            Avatar (URL)
            <input type="url" name="avatar" />
          </label>
          <div class="inline">
            <button class="btn" type="submit">Mettre à jour</button>
            <span class="muted" data-profile-saved></span>
          </div>
        </form>
        <article class="card">
          <h2>Réseaux sociaux</h2>
          <form class="form" data-social-form>
            <label>
              Discord
              <input type="url" name="discord" />
            </label>
            <label>
              X
              <input type="url" name="x" />
            </label>
            <label>
              Bluesky
              <input type="url" name="bluesky" />
            </label>
            <label>
              YouTube
              <input type="url" name="youtube" />
            </label>
            <label>
              Twitch
              <input type="url" name="twitch" />
            </label>
            <button class="btn" type="submit">Sauvegarder</button>
          </form>
        </article>
      </div>
    </section>

    <section data-section="servers" hidden>
      <div class="split">
        <article class="card">
          <div class="section-title">
            <h2>Mes serveurs</h2>
          </div>
          <div class="grid server-grid" data-dashboard-servers></div>
        </article>
        <form class="card form" data-edit-server-form>
          <h2>Modifier un serveur</h2>
          <input type="hidden" name="serverId" />
          <label>
            Catégorie
            <select name="category" data-edit-category></select>
          </label>
          <label>
            Nom
            <input type="text" name="name" required />
          </label>
          <label>
            Description
            <textarea name="description" rows="4" required></textarea>
          </label>
          <label>
            Site web
            <input type="url" name="website" />
          </label>
          <label>
            Pays
            <select name="country" data-edit-country>
              <option value="FR">France</option>
              <option value="BE">Belgique</option>
              <option value="CH">Suisse</option>
              <option value="CA">Canada</option>
              <option value="US">États-Unis</option>
              <option value="DE">Allemagne</option>
            </select>
          </label>
          <label>
            IP
            <input type="text" name="ip" />
          </label>
          <label>
            Port
            <input type="number" name="port" />
          </label>
          <label>
            Lien d'invitation
            <input type="url" name="invite" />
          </label>
          <label>
            Bannière (URL)
            <input type="url" name="banner" />
          </label>
          <label class="inline">
            <input type="checkbox" name="public" />
            Serveur public
          </label>
          <div data-edit-status></div>
          <button class="btn" type="submit">Sauvegarder</button>
        </form>
      </div>
    </section>

    <section data-section="subscriptions" hidden>
      <article class="card">
        <div class="section-title">
          <h2>Mes abonnements</h2>
          <a class="btn btn-ghost" href="./offers.html">Nouveau</a>
        </div>
        <div class="table-list" data-dashboard-subscriptions></div>
      </article>
    </section>

    <section data-section="settings" hidden>
      <article class="card">
        <h2>Paramètres de sécurité</h2>
        <p class="muted">Activez la double authentification depuis Supabase Auth si besoin.</p>
        <button class="btn btn-ghost" data-action="refresh-session">Rafraîchir la session</button>
      </article>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-grid">
      <div>
        <strong>Quokka</strong>
        <p class="muted">Plateforme de découverte et promotion de serveurs.</p>
      </div>
      <div class="footer-links">
        <a href="./index.html">Accueil</a>
        <a href="./servers.html">Serveurs</a>
        <a href="./offers.html">Offres</a>
      </div>
      <div class="footer-links">
        <a href="./subscriptions.html">Abonnements</a>
      </div>
    </div>
  </footer>

  <script type="module" src="./assets/app.js"></script>
</body>
</html>
